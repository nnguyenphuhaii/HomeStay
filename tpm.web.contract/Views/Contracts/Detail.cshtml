@{
    List<string> BreadCrumb = new List<string>();
    BreadCrumb.Add("<span class='breadcrumb-item'>Hợp đồng</span>");
    BreadCrumb.Add("<span class='breadcrumb-item active'> Danh sách</span>");
    ViewBag.BreadCrumb = BreadCrumb;
}
<script src="~/assets/js/vendor/ui/moment/moment.min.js"></script>
<script src="~/assets/js/vendor/pickers/daterangepicker.js"></script>
<script src="~/assets/js/vendor/pickers/datepicker.min.js"></script>
<script src="~/assets/js/vendor/forms/selects/select2.min.js"></script>
<script src="~/assets/js/vendor/notifications/noty.min.js"></script>
<script src="/libjs/plugins/jalert.js"></script>
<script>
    var ContractID = @ViewBag.ContractID;
</script>
<!-- Content area -->
<div class="content" ng-controller="IndexController">
    <ul class="nav nav-tabs nav-tabs-highlight justify-content">
        <li class="nav-item">
            <a href="#" class="nav-link" ng-class="{ 'active': activeTab === 'contract' }" ng-click="ContractDetail.setActiveTab('contract')">Hợp Đồng</a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" ng-class="{ 'active': activeTab === 'service' }" ng-click="ContractDetail.setActiveTab('service')">Dịch Vụ</a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" ng-class="{ 'active': activeTab === 'serviceDetail' }" ng-click="ContractDetail.setActiveTab('serviceDetail')">Chi Tiết Dịch Vụ</a>
        </li>
    </ul>
    <div class="card card-body" ng-show="activeTab === 'contract'">
        <div class="tabcontent" style="display: block;">
            <div class="row">
                <div class="col-lg-4">
                    <div class="mb-3">
                        <label class="form-label" for="contractNumber">Số Hợp Đồng:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Contract_Number" placeholder="Số Hợp Đồn" id="contractNumber" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label class="form-label">Loại Hợp Đồng:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Contract_Type_Name" id="customerCompanyName" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label class="form-label" for="customerCompanyName">Tên Công Ty:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Customer_Company_Name" id="customerCompanyName" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="address">Địa Chỉ Công Ty:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Address" id="address" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="address">Địa Chỉ Liên Hệ:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Address2" id="address2" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="email">Email:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Email" id="email" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="phone">Điện Thoại Cố Định:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Phone" id="phone" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="phone">Điện Thoại Di Động:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.MobilePhone" id="mobile" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="mobilePhone">Đại Diện:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.Representative" id="companyRepresentative" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="tin">Mã Số Thuế:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.TIN" id="tin" disabled>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="mb-3">
                        <label for="empID">Nhân viên phụ trách hợp đồng:</label>
                        <input class="form-control" type="text" ng-model="ContractDetail.Tab1.Content.FullName" id="empID" disabled>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-body" ng-show="activeTab === 'service'">
        <div class="tabcontent" style="display: block;">
            <div class="card">
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr style="text-align: center">
                                <th>STT</th>
                                <th>Loại dịch vụ</th>
                                <th>Đơn vị tính</th>
                                <th>Đơn giá</th>
                                <th>Số lượng</th>
                                <th>Thành tiền</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in ContractDetail.Tab2.Content">
                                <td style="text-align: center">{{ $index + 1 }}</td>
                                <td style="text-align: center">{{ item.Name }}</td>
                                <td style="text-align: center">{{ item.Unit }}</td>
                                <td style="text-align: center">{{ item.Unit_Price }}</td>
                                <td style="text-align: center">{{ item.Quantity }}</td>
                                <td style="text-align: center">{{ item.Total_Amount }}</td>
                            </tr>
                            <tr ng-show="CreateContract.Tab2.lst.length == 0" style="text-align:center">
                                <td colspan="7">Không có dữ liệu</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-body" ng-show="activeTab === 'serviceDetail'">
        <div class="tabcontent" style="display: block;">
            @* <div class="row mb-3">
                <div class="col-sm-1"></div>
                <div class="col-sm-4">
                    <select class="form-control select" ng-model="CreateContract.ContractType.Filter" ng-options="item.Contract_Type_Name for item in CreateContract.ListContractType">
                        <option value="" disabled selected>Lọc theo loại hợp đồng</option>
                    </select>
                </div>
                <div class="col-sm-2"></div>
                <div class="col-sm-4">
                    <select class="form-control select" ng-model="CreateContract.Service.ServiceTypeSelected.Filter" ng-options="item.Name for item in CreateContract.ServiceType">
                        <option value="" disabled selected>Lọc theo loại dịch vụ</option>
                    </select>
                </div>
                <div class="col-sm-1"></div>
            </div> *@
            <div class="card" ng-repeat="item in ContractDetail.Tab3.Content">
                <div class="card-header d-flex flex-wrap">
                    <h6 class="mb-0">
                        {{ item.Name }}
                    </h6>
                    @* <h6 class="mb-0">{{ item }}</h6> *@
                    <div class="d-inline-flex ms-auto">
                        <a class="text-body" data-card-action="collapse">
                            <i class="ph-caret-down"></i>
                        </a>
                        @* <a class="text-body mx-2" data-card-action="reload">
                        <i class="ph-arrows-clockwise"></i>
                        </a>
                        <a class="text-body" data-card-action="remove">
                        <i class="ph-x"></i>
                        </a> *@
                    </div>
                </div>
                <div class="collapse show">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr style="text-align:center;">
                                        <th class="col-1">STT</th>
                                        <th class="col-4">Giai đoạn</th>
                                        <th class="col-2">Ngày hoàn thành</th>
                                        <th class="col-4">Nhân viên phụ trách</th>
                                        <th class="col-1">Hoàn thành</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="text-align:center" ng-repeat="step in item.StepDetail">
                                        <td>{{  $index + 1  }}</td>
                                        <td>
                                            {{ step.StepName }}
                                        </td>
                                        <td>
                                            {{ step.Completion_Date }}
                                        </td>
                                        <td>
                                            {{ step.FullName }}

                                            @* <select class="form-control select employeeItemSelect2-{{item.ServiceTypeSelected.Service_Type_ID}}"
                                            ng-model="CreateContract.Tab3.StepDetail.EmployeeAssigned[$index]"
                                            ng-options="eitem.EmployeeID as eitem.FullName for eitem in CreateContract.Tab3.EmployeeLst">
                                            <option value="" disabled selected>Chọn nhân viên phụ trách</option>
                                            </select> *@

                                        </td>
                                        <td style="text-align: center;vertical-align: middle; padding: 0px; margin: 0;">
                                            <input type="checkbox" class="form-check-input" ng-true-value="1" ng-false-value="0" ng-model="step.Status_ID" disabled>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="text-end">
        <button type="submit" ng-click="Edit();" class="text-text-start btn btn-success">
            <i class="ph-note-pencil me-2"></i>
            Sửa
        </button>
    </div>
</div>
<!-- /content area -->
@section jsScript{
    <script src="~/script-handler/contract-detail/index-controller.js"></script>
}
